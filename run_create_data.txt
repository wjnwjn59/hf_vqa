conda activate thinh_wiki

export PYTHONPATH="./:$PYTHONPATH"

CUDA_VISIBLE_DEVICES=0 python src/data/create_data/qwen/generate_wikipedia_summary.py \
    --model_name "unsloth/Qwen3-8B" \
    --input_data "./src/data/create_data/wikipedia/wikipedia_processed.json" \
    --template_path "./src/prompts/summary.jinja" \
    --start-wiki 0 \
    --end-wiki 100 \
    --batch_size 8

CUDA_VISIBLE_DEVICES=0 python src/data/create_data/qwen/generate_infographic_data.py \
    --model_name "unsloth/Qwen3-8B" \
    --input_data "./src/data/create_data/output/summarize" \
    --template_path "./src/prompts/bizgen.jinja" \
    --start-wiki 0 \
    --end-wiki 100 \
    --batch_size 8 

python src/data/create_data/qwen/merge_infographic_bboxes.py \
    --start-wiki 0 \
    --end-wiki 232000 \
    --seed 42
    # Add --layout_data to enable data layers (may reduce image quality)
    # Add --layout_timeline to enable timeline layers (may reduce image quality)

cd <path-to-bizgen>
conda activate khoina_bizgen
CUDA_VISIBLE_DEVICES=0 python inference.py \
--ckpt_dir checkpoints/lora/infographic \
--output_dir infographic \
--sample_list /home/thinhnp/hf_vqa/src/data/create_data/output/bizgen_format/wiki000001.json

bash scripts/run_generate_parallel.sh
bash scripts/run_merge_parallel.sh